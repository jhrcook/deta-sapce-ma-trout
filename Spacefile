# Spacefile Docs: <https://go.deta.dev/docs/spacefile/v0>

v: 0
micros:
  - name: front-end
    src: frontend
    engine: python3.9
    primary: true
    run: uvicorn trout_frontend.asgi:application
    dev: .env/bin/python -m uvicorn trout_frontend.asgi:application --reload
    
  - name: data-scraping
    src: .
    engine: custom
    dev: cargo run
    include:
      - trout_scraping_server_app
    commands:
      - echo "Executable built on GitHub Action"
      - pwd
      - ls -lha
    run: trout_scraping_server_app
    actions:
      - id: "scrape-new-data"
        name: "Scrape new data"
        description: "Collects new data and saves it to Deta Base."
        trigger: "schedule"
        default_interval: "0 */2 * * *"
